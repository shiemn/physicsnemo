BootStrap: docker
From: pytorch/pytorch:2.5.1-cuda12.4-cudnn9-devel

%post
   export DEBIAN_FRONTEND=noninteractive

   apt-get -y update
   apt-get -y install libgeos++ libproj-dev libnetcdf-dev libhdf5-dev netcdf-bin libx11-6 libxext6 cdo

   pip install --upgrade pip
   git clone https://github.com/NVIDIA/physicsnemo.git
   pip install ./physicsnemo


   pip install netCDF4==1.7.2 hydra-core>=1.2.0 omegaconf>=2.3.0 wandb>=0.13.7 nvtx>=0.2.8 dask>=2025.3.0 xskillscore>=0.0.26 cftime>=1.6.2 opencv-python>=4.11.0.86 numba>=0.61.0 scipy>=1.15.1 typer>=0.16.0 termcolor>=2.1.1
   pip install jsonargparse[signatures] lightning matplotlib xarray dask plotly geopandas cartopy h5py==3.14.0 basicsr einops diffusers cdo
   
%labels
   Author SimonH